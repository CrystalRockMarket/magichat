<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magic Hat Link | Rainbow Family</title>
    <meta name="description" content="Support the Rainbow Family Magic Hat with every Amazon purchase ‚Äî at no extra cost to you. Convert any Amazon link and 1-3% goes directly to feeding the family.">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Magic Hat Link | Rainbow Family">
    <meta property="og:description" content="Support the Rainbow Family Magic Hat with every Amazon purchase ‚Äî at no extra cost to you. Amazon gives back 1-3% on every sale.">
    <meta property="og:image" content="https://magichatlink.com/og-image.png">
    <meta property="og:url" content="https://magichatlink.com">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Magic Hat Link | Rainbow Family">
    <meta name="twitter:description" content="Support the Rainbow Family Magic Hat with every Amazon purchase ‚Äî at no extra cost to you.">
    <meta name="twitter:image" content="https://magichatlink.com/og-image.png">
    
    <!-- Favicon (hat emoji as SVG data URI) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üé©</text></svg>">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-dark: #1a1625;
            --bg-card: #241f31;
            --bg-input: #2d2640;
            --border: #3d3555;
            --text-primary: #f5f0ff;
            --text-secondary: #b8a9d4;
            --text-muted: #7a6a99;
            
            /* Rainbow spectrum */
            --red: #ff6b6b;
            --orange: #ffa94d;
            --yellow: #ffd43b;
            --green: #69db7c;
            --blue: #74c0fc;
            --indigo: #9775fa;
            --violet: #da77f2;
            
            --accent: #ffd43b;
            --success: #69db7c;
            --error: #ff6b6b;
        }

        body {
            font-family: 'Quicksand', -apple-system, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 40px 20px;
            background-image: 
                radial-gradient(ellipse 100% 60% at 20% 0%, rgba(218, 119, 242, 0.12), transparent),
                radial-gradient(ellipse 80% 50% at 80% 10%, rgba(116, 192, 252, 0.1), transparent),
                radial-gradient(ellipse 60% 40% at 50% 100%, rgba(255, 212, 59, 0.08), transparent);
        }

        .container {
            width: 100%;
            max-width: 680px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        .rainbow-bar {
            height: 4px;
            background: linear-gradient(90deg, 
                var(--red), var(--orange), var(--yellow), 
                var(--green), var(--blue), var(--indigo), var(--violet));
            border-radius: 2px;
            margin-bottom: 32px;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin-bottom: 12px;
        }

        .logo-icon {
            font-size: 48px;
            filter: drop-shadow(0 4px 12px rgba(255, 212, 59, 0.4));
        }

        h1 {
            font-size: 32px;
            font-weight: 700;
            letter-spacing: -0.5px;
            background: linear-gradient(135deg, var(--yellow) 0%, var(--orange) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 17px;
            font-weight: 500;
            margin-top: 8px;
        }

        /* Explainer Section */
        .explainer {
            background: linear-gradient(135deg, rgba(255, 212, 59, 0.08) 0%, rgba(218, 119, 242, 0.08) 100%);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 28px;
            margin-bottom: 28px;
        }

        .explainer h2 {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 16px;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .explainer p {
            font-size: 15px;
            line-height: 1.7;
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        .explainer p:last-of-type {
            margin-bottom: 0;
        }

        .highlight-box {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .highlight-box .big-number {
            font-size: 36px;
            font-weight: 700;
            color: var(--success);
            display: block;
            margin-bottom: 8px;
        }

        .highlight-box .context {
            font-size: 14px;
            color: var(--text-muted);
        }

        .highlight-box .formula-explain {
            font-size: 12px;
            font-family: 'JetBrains Mono', monospace;
            color: var(--text-muted);
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border);
        }

        .formula-note {
            font-size: 14px;
            line-height: 1.7;
            color: var(--text-secondary);
            background: var(--bg-card);
            border-radius: 10px;
            padding: 16px;
            margin-top: 16px;
        }

        .distribution-label {
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            margin-top: 20px;
            margin-bottom: 10px;
            text-align: center;
            text-decoration: underline;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .info-tooltip {
            position: relative;
            display: inline-flex;
            cursor: help;
        }

        .info-icon {
            width: 14px;
            height: 14px;
            color: var(--text-muted);
            transition: color 0.2s ease;
        }

        .info-tooltip:hover .info-icon {
            color: var(--accent);
        }

        .tooltip-text {
            visibility: hidden;
            opacity: 0;
            position: absolute;
            bottom: calc(100% + 10px);
            left: 50%;
            transform: translateX(-50%);
            width: 280px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 14px;
            font-size: 13px;
            font-weight: 400;
            text-transform: none;
            letter-spacing: normal;
            text-decoration: none;
            text-align: left;
            line-height: 1.6;
            color: var(--text-secondary);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            z-index: 100;
            transition: opacity 0.2s ease, visibility 0.2s ease;
        }

        .tooltip-text::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 8px solid transparent;
            border-top-color: var(--border);
        }

        .info-tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        @media (max-width: 500px) {
            .tooltip-text {
                width: 220px;
                left: auto;
                right: -10px;
                transform: none;
            }
            
            .tooltip-text::after {
                left: auto;
                right: 16px;
                transform: none;
            }
        }

        .distribution {
            display: flex;
            gap: 12px;
            margin-top: 0;
            align-items: stretch;
        }

        .distribution-item {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 14px 16px;
            text-align: center;
        }

        .distribution-item.magic-hat-item {
            flex: 0 0 30%;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .distribution-item.dao-item {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 16px;
            text-align: left;
        }

        .distribution-item .percent {
            font-size: 24px;
            font-weight: 700;
            color: var(--yellow);
        }

        .distribution-item .label {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 2px;
        }

        .dao-header {
            flex-shrink: 0;
            text-align: center;
        }

        .dao-item {
            position: relative;
        }

        .dao-funding {
            flex: 1;
        }

        .funding-bar {
            height: 6px;
            background: var(--bg-dark);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 6px;
        }

        .funding-progress {
            height: 100%;
            background: linear-gradient(90deg, var(--green), var(--blue));
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        .funding-text {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 11px;
            color: var(--text-muted);
        }

        .funding-text span {
            font-family: 'JetBrains Mono', monospace;
        }

        .dao-learn-more {
            font-family: 'Quicksand', sans-serif;
            font-size: 11px;
            font-weight: 600;
            color: var(--blue);
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .dao-learn-more:hover {
            color: var(--green);
        }

        @media (max-width: 500px) {
            .distribution {
                flex-direction: column;
            }

            .distribution-item.magic-hat-item {
                flex: none;
            }

            .distribution-item.dao-item {
                flex-direction: column;
                text-align: center;
            }

            .dao-funding {
                width: 100%;
            }

            .funding-text {
                flex-direction: column;
                gap: 4px;
            }
        }

        /* Converter Card */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 24px;
        }

        .input-group {
            margin-bottom: 24px;
        }

        label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .input-label-main {
            text-transform: none;
            font-size: 15px;
            font-weight: 600;
            letter-spacing: normal;
            color: var(--text-primary);
        }

        .input-helper {
            font-size: 13px;
            color: var(--text-muted);
            margin-top: 10px;
            line-height: 1.5;
        }

        input[type="text"] {
            width: 100%;
            background: var(--bg-input);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
            color: var(--text-primary);
            transition: all 0.2s ease;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 4px rgba(255, 212, 59, 0.15);
        }

        input[type="text"]::placeholder {
            color: var(--text-muted);
        }

        .convert-btn {
            width: 100%;
            background: linear-gradient(135deg, var(--yellow) 0%, var(--orange) 100%);
            border: none;
            border-radius: 12px;
            padding: 18px 24px;
            font-family: 'Quicksand', sans-serif;
            font-size: 16px;
            font-weight: 700;
            color: #1a1625;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 20px rgba(255, 212, 59, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .convert-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(255, 212, 59, 0.4);
        }

        .convert-btn:active {
            transform: translateY(0);
        }

        /* Total Earned Display */
        .total-earned {
            background: linear-gradient(135deg, rgba(105, 219, 124, 0.1) 0%, rgba(255, 212, 59, 0.1) 100%);
            border: 1px solid var(--green);
            border-radius: 10px;
            padding: 10px 16px;
            margin-bottom: 12px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .total-earned-label {
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
        }

        .total-earned-amount {
            font-size: 20px;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            color: var(--green);
        }

        /* Links Converted Counter */
        .links-converted {
            text-align: center;
            margin-top: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            font-size: 11px;
            color: var(--text-muted);
        }

        .counter-number {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 11px;
        }

        .counter-label {
            font-size: 11px;
        }

        /* Bookmark Reminder */
        .bookmark-reminder {
            background: var(--bg-card);
            border: 1px dashed var(--border);
            border-radius: 12px;
            padding: 14px 20px;
            margin-bottom: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .bookmark-icon {
            font-size: 18px;
        }

        .bookmark-btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 8px 14px;
            font-family: 'Quicksand', sans-serif;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .bookmark-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        .bookmark-btn svg {
            width: 14px;
            height: 14px;
        }

        /* Bookmark Modal */
        .bookmark-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .bookmark-modal.visible {
            display: flex;
        }

        .bookmark-modal-content {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 28px;
            max-width: 400px;
            width: 100%;
            position: relative;
        }

        .bookmark-modal h4 {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 16px;
        }

        .bookmark-modal p {
            font-size: 14px;
            line-height: 1.7;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .bookmark-modal code {
            background: var(--bg-input);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
        }

        .bookmark-modal-close {
            position: absolute;
            top: 16px;
            right: 16px;
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 24px;
            line-height: 1;
        }

        .bookmark-modal-close:hover {
            color: var(--text-primary);
        }

        /* Success Animation & Confetti */
        .success-celebration {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        .success-celebration.active {
            display: block;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            opacity: 0;
        }

        .success-flash {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 64px;
            opacity: 0;
            pointer-events: none;
            z-index: 1000;
        }

        .success-flash.animate {
            animation: successPop 0.6s ease-out forwards;
        }

        @keyframes successPop {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(1); }
        }

        .output-section.celebrate .output-box {
            animation: celebratePulse 0.5s ease;
        }

        @keyframes celebratePulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(105, 219, 124, 0); }
            50% { box-shadow: 0 0 20px 10px rgba(105, 219, 124, 0.3); }
        }

        .output-section {
            display: none;
            margin-top: 28px;
            padding-top: 28px;
            border-top: 1px solid var(--border);
        }

        .output-section.visible {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .output-label {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
        }

        .output-label .status {
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .output-box {
            background: var(--bg-input);
            border: 2px solid var(--success);
            border-radius: 12px;
            padding: 16px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            color: var(--success);
            word-break: break-all;
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .output-type {
            display: inline-block;
            font-size: 12px;
            padding: 6px 10px;
            border-radius: 6px;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .output-type.clean {
            background: rgba(105, 219, 124, 0.15);
            color: var(--success);
        }

        .output-type.fallback {
            background: rgba(255, 169, 77, 0.15);
            color: var(--orange);
        }

        .button-row {
            display: flex;
            gap: 12px;
        }

        .action-btn {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: var(--bg-input);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 14px 20px;
            font-family: 'Quicksand', sans-serif;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .action-btn:hover {
            background: var(--border);
            border-color: var(--text-muted);
        }

        .action-btn.copied {
            background: rgba(105, 219, 124, 0.15);
            border-color: var(--success);
            color: var(--success);
        }

        .action-btn svg {
            width: 18px;
            height: 18px;
        }

        .error-message {
            display: none;
            background: rgba(255, 107, 107, 0.1);
            border: 2px solid rgba(255, 107, 107, 0.3);
            border-radius: 12px;
            padding: 14px 16px;
            margin-top: 16px;
            font-size: 14px;
            font-weight: 500;
            color: var(--error);
        }

        .error-message.visible {
            display: block;
            animation: shake 0.4s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-4px); }
            75% { transform: translateX(4px); }
        }

        /* Call to Action */
        .cta-section {
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(151, 117, 250, 0.1) 100%);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 28px;
            text-align: center;
            margin-bottom: 24px;
        }

        .cta-section h3 {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        .cta-section p {
            font-size: 15px;
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .fb-link {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: #1877f2;
            color: white;
            padding: 14px 28px;
            border-radius: 12px;
            text-decoration: none;
            font-weight: 600;
            font-size: 15px;
            transition: all 0.2s ease;
            box-shadow: 0 4px 16px rgba(24, 119, 242, 0.3);
        }

        .fb-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 24px rgba(24, 119, 242, 0.4);
        }

        .fb-link svg {
            width: 20px;
            height: 20px;
        }

        /* Footer */
        .disclaimer {
            text-align: center;
            font-size: 12px;
            color: var(--text-muted);
            line-height: 1.7;
            padding: 20px;
        }

        .rainbow-bar-bottom {
            height: 4px;
            background: linear-gradient(90deg, 
                var(--violet), var(--indigo), var(--blue), 
                var(--green), var(--yellow), var(--orange), var(--red));
            border-radius: 2px;
            margin-top: 32px;
        }

        /* Mobile adjustments */
        @media (max-width: 500px) {
            .distribution {
                flex-direction: column;
            }
            
            h1 {
                font-size: 26px;
            }
            
            .card, .explainer, .cta-section {
                padding: 24px;
            }

            .chart-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .chart-label {
                width: 100%;
            }

            .chart-bar-container {
                width: 100%;
            }
        }

        /* Earnings Chart */
        .earnings-chart {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 28px;
            margin-bottom: 28px;
        }

        .earnings-chart h2 {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .chart-subtitle {
            font-size: 14px;
            color: var(--text-muted);
            margin-bottom: 24px;
        }

        .chart-container {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .chart-row {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .chart-row.featured .chart-bar .bar-fill {
            background: linear-gradient(90deg, var(--yellow), var(--orange), var(--red));
        }

        .chart-row.featured .chart-value {
            color: var(--yellow);
            font-weight: 700;
        }

        .chart-label {
            width: 110px;
            flex-shrink: 0;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .chart-bar-container {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .chart-bar {
            height: 28px;
            min-width: 20px;
            flex: 1;
            max-width: 200px;
            background: var(--bg-input);
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }

        .bar-fill {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: linear-gradient(90deg, var(--green), var(--blue), var(--indigo));
            border-radius: 6px;
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0%, 100% { opacity: 0.85; }
            50% { opacity: 1; }
        }

        .chart-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            color: var(--success);
            white-space: nowrap;
            font-weight: 500;
        }

        .chart-footer {
            margin-top: 24px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
            text-align: center;
            font-size: 14px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .sparkle {
            animation: sparkle 1.5s infinite;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(0.9); }
        }

        /* Services Promo */
        .services-promo {
            background: linear-gradient(135deg, rgba(105, 219, 124, 0.08) 0%, rgba(116, 192, 252, 0.08) 100%);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .promo-item {
            display: flex;
            align-items: flex-start;
            gap: 16px;
        }

        .promo-icon {
            font-size: 32px;
            flex-shrink: 0;
        }

        .promo-content h4 {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .promo-content p {
            font-size: 14px;
            line-height: 1.6;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .promo-link {
            display: inline-block;
            font-size: 14px;
            font-weight: 600;
            color: var(--green);
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .promo-link:hover {
            color: var(--blue);
        }

        .promo-divider {
            height: 1px;
            background: var(--border);
            margin: 20px 0;
        }

        .donate-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--violet) 0%, var(--indigo) 100%);
            color: white;
            font-family: 'Quicksand', sans-serif;
            font-size: 14px;
            font-weight: 700;
            text-decoration: none;
            border-radius: 10px;
            transition: all 0.2s ease;
            box-shadow: 0 4px 16px rgba(218, 119, 242, 0.3);
        }

        .donate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 24px rgba(218, 119, 242, 0.4);
        }

        .donate-btn svg {
            width: 18px;
            height: 18px;
        }

        .contact-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--blue) 0%, var(--green) 100%);
            color: #1a1625;
            font-family: 'Quicksand', sans-serif;
            font-size: 14px;
            font-weight: 700;
            text-decoration: none;
            border-radius: 10px;
            transition: all 0.2s ease;
            box-shadow: 0 4px 16px rgba(116, 192, 252, 0.3);
        }

        .contact-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 24px rgba(116, 192, 252, 0.4);
        }

        .contact-btn svg {
            width: 18px;
            height: 18px;
        }

        /* Share Section */
        .share-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 28px;
            margin-bottom: 24px;
            text-align: center;
        }

        .share-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .share-icon {
            font-size: 28px;
        }

        .share-section h3 {
            font-size: 20px;
            font-weight: 700;
            color: var(--accent);
        }

        .share-section > p {
            font-size: 15px;
            line-height: 1.7;
            color: var(--text-secondary);
            margin-bottom: 24px;
            max-width: 480px;
            margin-left: auto;
            margin-right: auto;
        }

        .share-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .share-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 18px;
            border-radius: 10px;
            font-family: 'Quicksand', sans-serif;
            font-size: 14px;
            font-weight: 600;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .share-btn svg {
            width: 18px;
            height: 18px;
        }

        .share-btn.facebook {
            background: #1877f2;
            color: white;
        }

        .share-btn.facebook:hover {
            background: #0d65d9;
        }

        .share-btn.twitter {
            background: #000;
            color: white;
        }

        .share-btn.twitter:hover {
            background: #333;
        }

        .share-btn.reddit {
            background: #ff4500;
            color: white;
        }

        .share-btn.reddit:hover {
            background: #e03d00;
        }

        .share-btn.email {
            background: var(--indigo);
            color: white;
        }

        .share-btn.email:hover {
            background: #8363e8;
        }

        .share-btn.copy-link {
            background: var(--bg-input);
            color: var(--text-primary);
            border: 2px solid var(--border);
        }

        .share-btn.copy-link:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        .share-btn.copy-link.copied {
            background: rgba(105, 219, 124, 0.15);
            border-color: var(--success);
            color: var(--success);
        }

        .share-note {
            font-size: 14px;
            color: var(--text-muted);
            margin: 0;
        }

        @media (max-width: 500px) {
            .share-buttons {
                flex-direction: column;
            }
            
            .share-btn {
                width: 100%;
                justify-content: center;
            }
        }

        /* FAQ Accordion */
        .faq-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 28px;
            margin-bottom: 24px;
        }

        .faq-section h3 {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 20px;
            text-align: center;
        }

        .accordion {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .accordion-item {
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            background: var(--bg-input);
        }

        .accordion-header {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
            padding: 16px 20px;
            background: transparent;
            border: none;
            cursor: pointer;
            text-align: left;
            font-family: 'Quicksand', sans-serif;
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
            transition: all 0.2s ease;
        }

        .accordion-header:hover {
            color: var(--accent);
        }

        .accordion-header span {
            flex: 1;
        }

        .accordion-icon {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
            color: var(--text-muted);
            transition: transform 0.3s ease;
        }

        .accordion-item.active .accordion-icon {
            transform: rotate(180deg);
            color: var(--accent);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
        }

        .accordion-item.active .accordion-content {
            max-height: 300px;
        }

        .accordion-content p {
            padding: 0 20px 20px 20px;
            font-size: 14px;
            line-height: 1.7;
            color: var(--text-secondary);
            margin: 0;
        }

        /* Main Page Accordion */
        .main-accordion {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 24px;
        }

        .main-accordion-item {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
        }

        .main-accordion-header {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
            padding: 18px 20px;
            background: transparent;
            border: none;
            cursor: pointer;
            text-align: left;
            font-family: 'Quicksand', sans-serif;
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
            transition: all 0.2s ease;
        }

        .main-accordion-header:hover {
            color: var(--accent);
        }

        .main-accordion-header span {
            flex: 1;
        }

        .main-accordion-item .accordion-icon {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
            color: var(--text-muted);
            transition: transform 0.3s ease;
        }

        .main-accordion-item.active .accordion-icon {
            transform: rotate(180deg);
            color: var(--accent);
        }

        .main-accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
        }

        .main-accordion-item.active .main-accordion-content {
            max-height: 2000px;
        }

        /* Inner content styling */
        .earnings-chart-inner,
        .cta-inner,
        .share-inner,
        .faq-inner,
        .services-inner {
            padding: 0 20px 20px 20px;
        }

        .cta-inner {
            text-align: center;
        }

        .cta-inner p {
            font-size: 15px;
            line-height: 1.7;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .share-inner p {
            font-size: 15px;
            line-height: 1.7;
            color: var(--text-secondary);
            margin-bottom: 20px;
            text-align: center;
        }

        .share-inner .share-buttons {
            margin-bottom: 16px;
        }

        .share-inner .share-note {
            text-align: center;
        }

        .faq-inner .accordion {
            margin: 0;
        }

        .services-inner .promo-item {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            padding: 16px 0;
        }

        .services-inner .promo-divider {
            height: 1px;
            background: var(--border);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Total Earned Display -->
        <div class="total-earned">
            <div class="total-earned-label">Magic Hat Earnings To Date</div>
            <div class="total-earned-amount">
                <!-- ====== UPDATE THIS NUMBER ====== -->
                $0.00
                <!-- ================================ -->
            </div>
        </div>

        <div class="rainbow-bar"></div>
        
        <header>
            <div class="logo">
                <span class="logo-icon">üé©</span>
                <h1>Magic Hat Link</h1>
            </div>
            <p class="subtitle">Feed the family with every Amazon purchase</p>
        </header>

        <!-- Converter - FIRST -->
        <div class="card">
            <div class="input-group">
                <label class="input-label-main">Step 1: Copy any Amazon product link and paste it here</label>
                <input 
                    type="text" 
                    id="inputUrl" 
                    placeholder="https://www.amazon.com/..."
                    autocomplete="off"
                    spellcheck="false"
                >
                <p class="input-helper">Step 2: Click the button below ‚Äî your new link will earn money for Magic Hat at no extra cost to you!</p>
            </div>

            <button class="convert-btn" id="convertBtn">
                <span>ü™Ñ</span>
                Convert to Magic Hat Link
            </button>

            <div class="links-converted">
                <!-- ====== UPDATE THIS NUMBER ====== -->
                <span class="counter-number" id="linksCounter">0</span>
                <!-- ================================ -->
                <span class="counter-label">links converted this year</span>
            </div>

            <div class="error-message" id="errorMessage"></div>

            <div class="output-section" id="outputSection">
                <div class="output-label">
                    <span class="status"></span>
                    <label style="margin: 0;">Your Magic Hat Link</label>
                </div>
                <span class="output-type" id="outputType"></span>
                <div class="output-box" id="outputUrl"></div>
                <div class="button-row">
                    <button class="action-btn" id="copyBtn">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                        </svg>
                        <span>Copy</span>
                    </button>
                    <button class="action-btn" id="openBtn">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                        </svg>
                        <span>Shop</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Bookmark Reminder -->
        <div class="bookmark-reminder">
            <span class="bookmark-icon">‚≠ê</span>
            <span>Bookmark this page so you can convert links every time you shop!</span>
            <button class="bookmark-btn" id="bookmarkBtn">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/>
                </svg>
                How to Bookmark
            </button>
        </div>

        <!-- Explainer -->
        <div class="explainer">
            <h2>‚ú® How It Works</h2>
            <p>
                When you shop through a Magic Hat link, <strong>you pay the exact same price</strong> ‚Äî nothing changes for you. 
                The difference? Amazon gives back 1‚Äì3% of every sale as a commission, and that money goes straight to Magic Hat.
            </p>
            <p>
                It's free money for the family. You're already shopping ‚Äî now your purchases help feed the circle.
            </p>
            
            <div class="highlight-box">
                <span class="big-number">$19,800/year</span>
                <span class="context">The potential if we come together</span>
                <div class="formula-explain">
                    33,000 in the Rainbow Facebook group √ó ‚Öì participation √ó $600 avg spend √ó 3% commission
                </div>
            </div>
            
            <p class="formula-note">
                If just <strong>one-third</strong> of the Rainbow Family Facebook group spent <strong>half</strong> of what the average American household spends on Amazon each year (~$1,200) using these links, Magic Hat could earn nearly <strong>$20,000 annually</strong>.
            </p>

            <div class="distribution-label">
                Earnings Distribution
                <span class="info-tooltip">
                    <svg class="info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 16v-4M12 8h.01"/>
                    </svg>
                    <span class="tooltip-text">When Amazon pays out commissions from your purchases, 80% goes directly to Magic Hat to feed the family at gatherings. The remaining 20% goes toward Katuah DAO ‚Äî a community fund that launches once we hit $10,000. This fund will be governed by family representatives from different regions.</span>
                </span>
            </div>

            <div class="distribution">
                <div class="distribution-item magic-hat-item">
                    <div class="percent">80%</div>
                    <div class="label">Magic Hat</div>
                </div>
                <div class="distribution-item dao-item">
                    <div class="dao-header">
                        <div class="percent">20%</div>
                        <div class="label">Katuah DAO</div>
                    </div>
                    <div class="dao-funding">
                        <div class="funding-bar">
                            <div class="funding-progress" style="width: 0%;"></div>
                        </div>
                        <div class="funding-text">
                            <span>$0 / $10,000 to launch</span>
                            <a href="#" class="dao-learn-more">Learn more ‚Üí</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Page Accordion -->
        <div class="main-accordion">
            <div class="main-accordion-item">
                <button class="main-accordion-header">
                    <span>üí∞ What Your Purchases Could Earn</span>
                    <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                    </svg>
                </button>
                <div class="main-accordion-content">
                    <!-- Earnings Chart -->
                    <div class="earnings-chart-inner">
                        <p class="chart-subtitle">Amazon pays 1-3% commission depending on category</p>
                        
                        <div class="chart-container">
                <div class="chart-row">
                    <div class="chart-label">$25 purchase</div>
                    <div class="chart-bar-container">
                        <div class="chart-bar">
                            <span class="bar-fill" style="width: 5%;"></span>
                        </div>
                        <span class="chart-value">$0.25 ‚Äì $0.75</span>
                    </div>
                </div>
                <div class="chart-row">
                    <div class="chart-label">$50 purchase</div>
                    <div class="chart-bar-container">
                        <div class="chart-bar">
                            <span class="bar-fill" style="width: 10%;"></span>
                        </div>
                        <span class="chart-value">$0.50 ‚Äì $1.50</span>
                    </div>
                </div>
                <div class="chart-row">
                    <div class="chart-label">$100 purchase</div>
                    <div class="chart-bar-container">
                        <div class="chart-bar">
                            <span class="bar-fill" style="width: 20%;"></span>
                        </div>
                        <span class="chart-value">$1.00 ‚Äì $3.00</span>
                    </div>
                </div>
                <div class="chart-row">
                    <div class="chart-label">$200 purchase</div>
                    <div class="chart-bar-container">
                        <div class="chart-bar">
                            <span class="bar-fill" style="width: 40%;"></span>
                        </div>
                        <span class="chart-value">$2.00 ‚Äì $6.00</span>
                    </div>
                </div>
                <div class="chart-row featured">
                    <div class="chart-label">$500 purchase</div>
                    <div class="chart-bar-container">
                        <div class="chart-bar">
                            <span class="bar-fill" style="width: 100%;"></span>
                        </div>
                        <span class="chart-value">$5.00 ‚Äì $15.00</span>
                    </div>
                </div>
            </div>

            <div class="chart-footer">
                <span class="sparkle">‚ú®</span>
                <span>Every dollar adds up ‚Äî thank you for feeding the family</span>
                <span class="sparkle">‚ú®</span>
            </div>
                    </div>
                </div>
            </div>

            <div class="main-accordion-item">
                <button class="main-accordion-header">
                    <span>üåà Join the Rainbow Family</span>
                    <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                    </svg>
                </button>
                <div class="main-accordion-content">
                    <!-- CTA -->
                    <div class="cta-inner">
                        <p>
                            Connect with the community, find gatherings, and learn more about 
                            how we take care of each other.
                        </p>
                        <a href="https://www.facebook.com/groups/RainbowFamilyofLivingLight/" target="_blank" rel="noopener" class="fb-link">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                            National Rainbow Family Page
                        </a>
                    </div>
                </div>
            </div>

            <div class="main-accordion-item">
                <button class="main-accordion-header">
                    <span>üì¢ Please Share!</span>
                    <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                    </svg>
                </button>
                <div class="main-accordion-content">
                    <!-- Share Section -->
                    <div class="share-inner">
                        <p>
                            Even if you don't use this yourself, every person who does puts dollars directly into Magic Hat. 
                            Spread the word ‚Äî it takes 10 seconds and helps feed the family.
                        </p>
                        
                        <div class="share-buttons">
                            <a href="https://www.facebook.com/sharer/sharer.php?u=YOURURL&quote=Support%20the%20Rainbow%20Family%20Magic%20Hat%20with%20every%20Amazon%20purchase%20%E2%80%94%20at%20no%20extra%20cost%20to%20you!%20%F0%9F%8C%88" target="_blank" rel="noopener" class="share-btn facebook">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                                </svg>
                                Facebook
                            </a>
                            <a href="https://twitter.com/intent/tweet?text=Support%20the%20Rainbow%20Family%20Magic%20Hat%20with%20every%20Amazon%20purchase%20%E2%80%94%20at%20no%20extra%20cost%20to%20you!%20%F0%9F%8C%88&url=YOURURL" target="_blank" rel="noopener" class="share-btn twitter">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                                </svg>
                                X / Twitter
                            </a>
                            <a href="https://www.reddit.com/submit?url=YOURURL&title=Support%20Rainbow%20Family%20Magic%20Hat%20with%20Amazon%20purchases" target="_blank" rel="noopener" class="share-btn reddit">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                                </svg>
                                Reddit
                            </a>
                            <a href="mailto:?subject=Help%20feed%20the%20Rainbow%20Family&body=Hey!%20Check%20this%20out%20%E2%80%94%20you%20can%20support%20the%20Rainbow%20Family%20Magic%20Hat%20with%20every%20Amazon%20purchase%20at%20no%20extra%20cost.%20Just%20convert%20your%20links%20here%3A%20YOURURL" class="share-btn email">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                </svg>
                                Email
                            </a>
                            <button class="share-btn copy-link" id="copyLinkBtn">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"/>
                                </svg>
                                <span>Copy Link</span>
                            </button>
                        </div>

                        <p class="share-note">
                            üôè Thank you for helping spread the word
                        </p>
                    </div>
                </div>
            </div>

            <div class="main-accordion-item">
                <button class="main-accordion-header">
                    <span>üìã More Info & FAQ</span>
                    <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                    </svg>
                </button>
                <div class="main-accordion-content">
                    <!-- FAQ Accordion -->
                    <div class="faq-inner">
                <div class="accordion-item">
                    <button class="accordion-header">
                        <span>Will I be able to see how much I earned for Magic Hat once I use the link?</span>
                        <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </button>
                    <div class="accordion-content">
                        <p>We're working on it. It can take a few days for Amazon Associates to pay out, so tracking individual purchase earnings may be tricky ‚Äî however transparency is a top priority and select family will have full access to the account for verification.</p>
                    </div>
                </div>

                <div class="accordion-item">
                    <button class="accordion-header">
                        <span>Who runs the Amazon Associates account?</span>
                        <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </button>
                    <div class="accordion-content">
                        <p>A Katuah member for now, soon an elder, and eventually an LLC.</p>
                    </div>
                </div>

                <div class="accordion-item">
                    <button class="accordion-header">
                        <span>What can I do to pitch in aside from using the site?</span>
                        <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </button>
                    <div class="accordion-content">
                        <p>Recommend us to anyone you know who might need a website or web app created! We'll kick a percentage down to Magic Hat and give you a commission.</p>
                    </div>
                </div>

                <div class="accordion-item">
                    <button class="accordion-header">
                        <span>When will the money actually go into the hands of Rainbow Family?</span>
                        <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </button>
                    <div class="accordion-content">
                        <p>During the first week of Nationals each year, someone from our team will personally contribute the year's earnings to Magic Hat. If a better option arises, we're happy to consider it. Sending money to kitchens in advance of the gathering in order to arrive fully stocked is also a possibility.</p>
                    </div>
                </div>

                <div class="accordion-item">
                    <button class="accordion-header">
                        <span>Have a good idea?</span>
                        <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </button>
                    <div class="accordion-content">
                        <p>Let's chat! If your idea involves helping out the family, we may be able to build it for free. If it's a commercial venture, we can offer you our 30+ years collective experience and a good ole fashioned family discount.</p>
                    </div>
                </div>

                <div class="accordion-item">
                    <button class="accordion-header">
                        <span>Long term plans?</span>
                        <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </button>
                    <div class="accordion-content">
                        <p>I'd like to hand this off to a group of family representatives ‚Äî one from FL, TX, Katuah, New England, Great Lakes, AZ, and West Coast. Each regional member would be responsible for voting and representing their family on decisions regarding the continued operation of this project.</p>
                    </div>
                </div>

                <div class="accordion-item">
                    <button class="accordion-header">
                        <span>Who are we?</span>
                        <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </button>
                    <div class="accordion-content">
                        <p>We're Katuah fam ‚Äî we love you :)</p>
                    </div>
                </div>
                </div>
                    </div>
                </div>
            </div>

            <div class="main-accordion-item">
                <button class="main-accordion-header">
                    <span>üõ†Ô∏è Support & Contact</span>
                    <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                    </svg>
                </button>
                <div class="main-accordion-content">
                    <!-- Services Promo -->
                    <div class="services-inner">
                        <div class="promo-item">
                            <span class="promo-icon">üåê</span>
                            <div class="promo-content">
                                <h4>Need a website or app?</h4>
                                <p>Let the family build it for you. A portion of every project goes straight to Magic Hat ‚Äî so even your business helps feed the circle.</p>
                                <a href="#" class="promo-link">Learn more ‚Üí</a>
                            </div>
                        </div>
                        
                        <div class="promo-divider"></div>
                        
                        <div class="promo-item">
                            <span class="promo-icon">üíú</span>
                            <div class="promo-content">
                                <h4>Tip The Team</h4>
                                <p>Contributions go directly to our dev team (not Magic Hat) and help us build more apps and projects that support Rainbow.</p>
                                <a href="#" class="donate-btn">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                                    </svg>
                                    Contribute
                                </a>
                            </div>
                        </div>
                        
                        <div class="promo-divider"></div>
                        
                        <div class="promo-item">
                            <span class="promo-icon">‚úâÔ∏è</span>
                            <div class="promo-content">
                                <h4>Contact us</h4>
                                <p>Questions, ideas, or just want to know who's behind this? Reach out directly.</p>
                                <a href="https://www.facebook.com/mikeosborne42" target="_blank" rel="noopener" class="contact-btn">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                                    </svg>
                                    Message Mike
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="disclaimer">
            As an Amazon Associate, we (Magic Hat) earn from qualifying purchases.<br>
            Amazon and the Amazon logo are trademarks of Amazon.com, Inc.<br><br>
            üåà We love you.
        </div>

        <div class="rainbow-bar-bottom"></div>
    </div>

    <!-- Bookmark Modal -->
    <div class="bookmark-modal" id="bookmarkModal">
        <div class="bookmark-modal-content">
            <button class="bookmark-modal-close" id="bookmarkModalClose">&times;</button>
            <h4>‚≠ê Bookmark This Page</h4>
            <p><strong>Windows/Linux:</strong> Press <code>Ctrl + D</code></p>
            <p><strong>Mac:</strong> Press <code>‚åò + D</code></p>
            <p><strong>Mobile:</strong> Tap the share button and select "Add to Bookmarks" or "Add to Home Screen"</p>
            <p style="margin-top: 16px; color: var(--text-muted); font-size: 13px;">Come back here every time you shop on Amazon to support Magic Hat!</p>
        </div>
    </div>

    <!-- Success Flash -->
    <div class="success-flash" id="successFlash">üéâ</div>

    <!-- Confetti Container -->
    <div class="success-celebration" id="confettiContainer"></div>

    <script>
        const AFFILIATE_TAG = 'crystalrockma-20';

        const TRACKING_PARAMS = [
            'ref', 'ref_', 'pf_rd_p', 'pf_rd_r', 'pf_rd_s', 'pf_rd_t', 'pf_rd_i',
            'pd_rd_i', 'pd_rd_r', 'pd_rd_w', 'pd_rd_wg', 'psc', 'qid', 'sr',
            'dchild', 'keywords', 'crid', 'sprefix', 'spLa', 'smid', 'linkCode',
            'linkId', 'camp', 'creative', 'creativeASIN', 'tag', 'ascsubtag',
            'th', 'ie', 'encoding', 'pd_rd_p', 'content-id', 'cv_ct_cx',
            '_encoding', 'rnid', 'rps', 'dib', 'dib_tag'
        ];

        const ASIN_PATTERNS = [
            /\/dp\/([A-Z0-9]{10})/i,
            /\/gp\/product\/([A-Z0-9]{10})/i,
            /\/gp\/aw\/d\/([A-Z0-9]{10})/i,
            /\/exec\/obidos\/asin\/([A-Z0-9]{10})/i,
            /\/o\/ASIN\/([A-Z0-9]{10})/i,
            /\/product\/([A-Z0-9]{10})/i,
        ];

        function extractASIN(url) {
            for (const pattern of ASIN_PATTERNS) {
                const match = url.match(pattern);
                if (match) return match[1].toUpperCase();
            }
            return null;
        }

        function normalizeAmazonDomain(url) {
            return url
                .replace(/^(https?:\/\/)?(smile\.|m\.)?amazon\.com/, 'https://www.amazon.com')
                .replace(/^(https?:\/\/)?(smile\.|m\.)?amazon\.(co\.uk|de|fr|es|it|ca|com\.au|co\.jp|in|com\.mx|com\.br|nl|se|pl|sg|ae|sa|eg|tr)/, 'https://www.amazon.com');
        }

        function stripTrackingParams(url) {
            try {
                const urlObj = new URL(url);
                TRACKING_PARAMS.forEach(param => {
                    urlObj.searchParams.delete(param);
                    for (let i = 0; i < 10; i++) {
                        urlObj.searchParams.delete(param + i);
                    }
                });
                return urlObj;
            } catch {
                return null;
            }
        }

        function convertUrl(inputUrl) {
            let url = inputUrl.trim();
            
            if (!url) {
                throw new Error('Please paste an Amazon link');
            }

            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                url = 'https://' + url;
            }

            if (!url.includes('amazon.')) {
                throw new Error('That doesn\'t look like an Amazon link');
            }

            if (url.includes('amzn.to') || url.includes('amzn.com')) {
                throw new Error('Short links (amzn.to) aren\'t supported ‚Äî use the full Amazon URL');
            }

            url = normalizeAmazonDomain(url);
            const asin = extractASIN(url);

            if (asin) {
                return {
                    url: `https://www.amazon.com/dp/${asin}?tag=${AFFILIATE_TAG}`,
                    type: 'clean',
                    asin: asin
                };
            } else {
                const urlObj = stripTrackingParams(url);
                if (!urlObj) {
                    throw new Error('Couldn\'t parse that URL');
                }
                urlObj.searchParams.set('tag', AFFILIATE_TAG);
                return {
                    url: urlObj.toString(),
                    type: 'fallback',
                    asin: null
                };
            }
        }

        // DOM
        const inputEl = document.getElementById('inputUrl');
        const convertBtn = document.getElementById('convertBtn');
        const outputSection = document.getElementById('outputSection');
        const outputUrl = document.getElementById('outputUrl');
        const outputType = document.getElementById('outputType');
        const copyBtn = document.getElementById('copyBtn');
        const openBtn = document.getElementById('openBtn');
        const errorMessage = document.getElementById('errorMessage');

        let currentAffiliateUrl = '';

        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.classList.add('visible');
            outputSection.classList.remove('visible');
        }

        function hideError() {
            errorMessage.classList.remove('visible');
        }

        convertBtn.addEventListener('click', () => {
            try {
                const result = convertUrl(inputEl.value);
                showOutput(result);
            } catch (err) {
                showError(err.message);
            }
        });

        inputEl.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                convertBtn.click();
            }
        });

        inputEl.addEventListener('paste', () => {
            setTimeout(() => convertBtn.click(), 50);
        });

        copyBtn.addEventListener('click', async () => {
            try {
                await navigator.clipboard.writeText(currentAffiliateUrl);
                copyBtn.classList.add('copied');
                copyBtn.querySelector('span').textContent = 'Copied!';
                setTimeout(() => {
                    copyBtn.classList.remove('copied');
                    copyBtn.querySelector('span').textContent = 'Copy';
                }, 2000);
            } catch {
                const textarea = document.createElement('textarea');
                textarea.value = currentAffiliateUrl;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                copyBtn.classList.add('copied');
                copyBtn.querySelector('span').textContent = 'Copied!';
                setTimeout(() => {
                    copyBtn.classList.remove('copied');
                    copyBtn.querySelector('span').textContent = 'Copy';
                }, 2000);
            }
        });

        openBtn.addEventListener('click', () => {
            window.open(currentAffiliateUrl, '_blank');
        });

        // Links converted counter (manual update - see HTML comment)
        const linksCounter = document.getElementById('linksCounter');

        // Success celebration
        const successFlash = document.getElementById('successFlash');
        const confettiContainer = document.getElementById('confettiContainer');
        const colors = ['#ff6b6b', '#ffa94d', '#ffd43b', '#69db7c', '#74c0fc', '#9775fa', '#da77f2'];

        function createConfetti() {
            confettiContainer.innerHTML = '';
            confettiContainer.classList.add('active');
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.top = '-10px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confetti.style.width = (Math.random() * 8 + 6) + 'px';
                confetti.style.height = (Math.random() * 8 + 6) + 'px';
                
                const duration = Math.random() * 2 + 1;
                const delay = Math.random() * 0.5;
                const drift = (Math.random() - 0.5) * 200;
                
                confetti.animate([
                    { opacity: 1, transform: `translateY(0) translateX(0) rotate(0deg)` },
                    { opacity: 1, transform: `translateY(${window.innerHeight}px) translateX(${drift}px) rotate(${Math.random() * 720}deg)` },
                    { opacity: 0, transform: `translateY(${window.innerHeight + 100}px) translateX(${drift}px) rotate(${Math.random() * 720}deg)` }
                ], {
                    duration: duration * 1000,
                    delay: delay * 1000,
                    easing: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)'
                });
                
                confettiContainer.appendChild(confetti);
            }
            
            setTimeout(() => {
                confettiContainer.classList.remove('active');
            }, 3500);
        }

        function celebrateSuccess() {
            // Flash emoji
            successFlash.classList.add('animate');
            setTimeout(() => {
                successFlash.classList.remove('animate');
            }, 600);
            
            // Confetti
            createConfetti();
            
            // Pulse the output box
            outputSection.classList.add('celebrate');
            setTimeout(() => {
                outputSection.classList.remove('celebrate');
            }, 500);
        }

        // Update showOutput to trigger celebration
        function showOutput(result) {
            currentAffiliateUrl = result.url;
            outputUrl.textContent = result.url;
            
            if (result.type === 'clean') {
                outputType.textContent = `‚úì Clean link ready`;
                outputType.className = 'output-type clean';
            } else {
                outputType.textContent = '‚ö° Link ready (search/category page)';
                outputType.className = 'output-type fallback';
            }
            
            outputSection.classList.add('visible');
            hideError();
            
            copyBtn.classList.remove('copied');
            copyBtn.querySelector('span').textContent = 'Copy';
            
            // Celebrate!
            celebrateSuccess();
        }

        // Bookmark modal
        const bookmarkBtn = document.getElementById('bookmarkBtn');
        const bookmarkModal = document.getElementById('bookmarkModal');
        const bookmarkModalClose = document.getElementById('bookmarkModalClose');

        bookmarkBtn.addEventListener('click', () => {
            bookmarkModal.classList.add('visible');
        });

        bookmarkModalClose.addEventListener('click', () => {
            bookmarkModal.classList.remove('visible');
        });

        bookmarkModal.addEventListener('click', (e) => {
            if (e.target === bookmarkModal) {
                bookmarkModal.classList.remove('visible');
            }
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && bookmarkModal.classList.contains('visible')) {
                bookmarkModal.classList.remove('visible');
            }
        });

        // Accordion functionality - FAQ
        const accordionHeaders = document.querySelectorAll('.accordion-header');
        
        accordionHeaders.forEach(header => {
            header.addEventListener('click', () => {
                const item = header.parentElement;
                const isActive = item.classList.contains('active');
                
                // Close all other FAQ items
                document.querySelectorAll('.accordion-item').forEach(i => {
                    i.classList.remove('active');
                });
                
                // Toggle current item
                if (!isActive) {
                    item.classList.add('active');
                }
            });
        });

        // Main page accordion
        const mainAccordionHeaders = document.querySelectorAll('.main-accordion-header');
        
        mainAccordionHeaders.forEach(header => {
            header.addEventListener('click', () => {
                const item = header.parentElement;
                const isActive = item.classList.contains('active');
                
                // Toggle current item (allow multiple open)
                item.classList.toggle('active');
            });
        });

        // Copy page link button
        const copyLinkBtn = document.getElementById('copyLinkBtn');
        const pageUrl = window.location.href;

        copyLinkBtn.addEventListener('click', async () => {
            try {
                await navigator.clipboard.writeText(pageUrl);
                copyLinkBtn.classList.add('copied');
                copyLinkBtn.querySelector('span').textContent = 'Copied!';
                setTimeout(() => {
                    copyLinkBtn.classList.remove('copied');
                    copyLinkBtn.querySelector('span').textContent = 'Copy Link';
                }, 2000);
            } catch {
                const textarea = document.createElement('textarea');
                textarea.value = pageUrl;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                copyLinkBtn.classList.add('copied');
                copyLinkBtn.querySelector('span').textContent = 'Copied!';
                setTimeout(() => {
                    copyLinkBtn.classList.remove('copied');
                    copyLinkBtn.querySelector('span').textContent = 'Copy Link';
                }, 2000);
            }
        });
    </script>
</body>
</html>
